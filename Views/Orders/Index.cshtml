@model IEnumerable<SkyLegends.Models.Order>

@{
    ViewData["Title"] = "I miei ordini";
}

<div class="page-shell bg-jet-black">
    <div class="page-container max-w-4xl">
        <h1 class="text-2xl sm:text-3xl font-bold text-white mb-8">I miei ordini</h1>

        @if (!Model.Any())
        {
            <div class="text-center py-16">
                <p class="text-xl text-gray-400 mb-6">Non hai ancora effettuato ordini.</p>
                <a asp-controller="Store" asp-action="Index"
                    class="inline-block bg-afterburner-red hover:bg-red-700 text-white font-bold py-3 px-8 rounded-lg transition duration-300">
                    Vai al catalogo
                </a>
            </div>
        }
        else
        {
            <div class="space-y-4">
                @foreach (var order in Model)
                {
                    <a asp-action="Details" asp-route-id="@order.Id"
                        class="block bg-titanium-grey rounded-lg border border-gray-700 p-6 hover:bg-gray-600 transition duration-300">
                        <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                            <div>
                                <div class="flex items-center gap-3 mb-1">
                                    <span class="text-white font-bold text-lg">Ordine #@order.Id</span>
                                    @{
                                        var (statusText, statusClass) = order.Status switch
                                        {
                                            "Paid" => ("Pagato", "bg-green-600/20 text-green-400"),
                                            "Shipped" => ("Spedito", "bg-blue-600/20 text-blue-400"),
                                            "Delivered" => ("Consegnato", "bg-purple-600/20 text-purple-400"),
                                            _ => ("In attesa", "bg-yellow-600/20 text-yellow-400")
                                        };
                                    }
                                    <span class="text-xs font-medium px-2.5 py-0.5 rounded-full @statusClass">
                                        @statusText
                                    </span>
                                </div>
                                <p class="text-sm text-gray-400">
                                    @order.CreatedAt.ToString("dd MMMM yyyy, HH:mm") - @order.Items.Count articol@(order.Items.Count == 1 ? "o" : "i")
                                </p>
                            </div>
                            <div class="text-right">
                                <p class="text-xl font-bold text-afterburner-red">EUR @order.TotalAmount.ToString("N2")</p>
                                <p class="text-xs text-gray-500">Apri dettagli</p>
                            </div>
                        </div>
                    </a>
                }
            </div>
        }
    </div>
</div>
